var mysql=require('mysql');

function connectServer(){

    var client=mysql.createConnection({
        host:'localhost',
        user:'root',
        password:'Bsl2018Admin_',
        database:'dby'
    })

    return client;
}


function  selectFun(client,username,callback){
    //client为一个mysql连接对象
    client.query('select password from t_User where username="'+username+'"',function(err,results,fields){
        if(err)
			return;
//			throw err;

        callback(results);
    });
}

function insertFun(client , username , password, callback){
	var data = {};
	phoneNumber = '13707339290';
	type='1';
    client.query('insert into t_User(username, password, phoneNumber, type) value(?,?,?,?)', [username, password,phoneNumber,type], function(err,result){
        if( err ){
			data.type = 'fail';
    		data.message = '注册失败！';
            console.log( "error:" + err.message);
            return err;
        }
		else
		{
			data.type = 'success';
    		data.message = '注册成功！';
		}
          callback(err);
    });
}

exports.connect = connectServer;
exports.selectFun  = selectFun;
exports.insertFun = insertFun;
